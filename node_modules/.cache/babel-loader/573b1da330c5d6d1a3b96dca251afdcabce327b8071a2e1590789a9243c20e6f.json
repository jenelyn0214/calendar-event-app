{"ast":null,"code":"import apiClient from '../api/apiClient'; // Axios instance\n\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport { jwtDecode } from 'jwt-decode';\nexport const login = credentials => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const response = await apiClient.post('/login', credentials);\n    const {\n      token\n    } = response.data;\n    const user = jwtDecode(token);\n    localStorage.setItem('token', token);\n    dispatch(loginSuccess({\n      token,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\nexport const register = data => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const response = await apiClient.post('/register', data);\n    const {\n      token\n    } = response.data;\n    const user = jwtDecode(token);\n    localStorage.setItem('token', token);\n    dispatch(loginSuccess({\n      token,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Registration failed'));\n  }\n};\nexport const logoutUser = () => async dispatch => {\n  try {\n    dispatch(logout());\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Logout failed'));\n  }\n};","map":{"version":3,"names":["apiClient","loginRequest","loginSuccess","loginFailure","logout","jwtDecode","login","credentials","dispatch","response","post","token","data","user","localStorage","setItem","error","message","register","logoutUser"],"sources":["/Users/gylou/Documents/projects/calendar-event-app/src/actions/authActions.ts"],"sourcesContent":["import apiClient from '../api/apiClient'; // Axios instance\nimport { AppThunk } from '../store';\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport { jwtDecode } from 'jwt-decode';\n\nexport const login = (credentials: { email: string; password: string }): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n\n    const response = await apiClient.post('/login', credentials);\n    const { token } = response.data;\n    const user = jwtDecode(token);\n\n    localStorage.setItem('token', token);\n    dispatch(loginSuccess({ token, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\n\nexport const register = (data: { email: string; password: string; fullName: string; organization: string }): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n\n    const response = await apiClient.post('/register', data);\n    const { token } = response.data;\n    const user = jwtDecode(token);\n\n    localStorage.setItem('token', token);\n    dispatch(loginSuccess({ token, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Registration failed'));\n  }\n};\n\nexport const logoutUser = (): AppThunk => async (dispatch) => {\n  try {\n    dispatch(logout());\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Logout failed'));\n  }\n};\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,kBAAkB,CAAC,CAAC;;AAE1C,SAASC,YAAY,EAAEC,YAAY,EAAEC,YAAY,EAAEC,MAAM,QAAQ,yBAAyB;AAC1F,SAASC,SAAS,QAAQ,YAAY;AAEtC,OAAO,MAAMC,KAAK,GAAIC,WAAgD,IAAe,MAAOC,QAAQ,IAAK;EACvG,IAAI;IACFA,QAAQ,CAACP,YAAY,CAAC,CAAC,CAAC;IAExB,MAAMQ,QAAQ,GAAG,MAAMT,SAAS,CAACU,IAAI,CAAC,QAAQ,EAAEH,WAAW,CAAC;IAC5D,MAAM;MAAEI;IAAM,CAAC,GAAGF,QAAQ,CAACG,IAAI;IAC/B,MAAMC,IAAI,GAAGR,SAAS,CAACM,KAAK,CAAC;IAE7BG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;IACpCH,QAAQ,CAACN,YAAY,CAAC;MAAES,KAAK;MAAEE;IAAK,CAAC,CAAC,CAAC;EACzC,CAAC,CAAC,OAAOG,KAAU,EAAE;IACnBR,QAAQ,CAACL,YAAY,CAACa,KAAK,CAACP,QAAQ,GAAGO,KAAK,CAACP,QAAQ,CAACG,IAAI,CAACK,OAAO,GAAG,cAAc,CAAC,CAAC;EACvF;AACF,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAIN,IAAiF,IAAe,MAAOJ,QAAQ,IAAK;EAC3I,IAAI;IACFA,QAAQ,CAACP,YAAY,CAAC,CAAC,CAAC;IAExB,MAAMQ,QAAQ,GAAG,MAAMT,SAAS,CAACU,IAAI,CAAC,WAAW,EAAEE,IAAI,CAAC;IACxD,MAAM;MAAED;IAAM,CAAC,GAAGF,QAAQ,CAACG,IAAI;IAC/B,MAAMC,IAAI,GAAGR,SAAS,CAACM,KAAK,CAAC;IAE7BG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;IACpCH,QAAQ,CAACN,YAAY,CAAC;MAAES,KAAK;MAAEE;IAAK,CAAC,CAAC,CAAC;EACzC,CAAC,CAAC,OAAOG,KAAU,EAAE;IACnBR,QAAQ,CAACL,YAAY,CAACa,KAAK,CAACP,QAAQ,GAAGO,KAAK,CAACP,QAAQ,CAACG,IAAI,CAACK,OAAO,GAAG,qBAAqB,CAAC,CAAC;EAC9F;AACF,CAAC;AAED,OAAO,MAAME,UAAU,GAAGA,CAAA,KAAgB,MAAOX,QAAQ,IAAK;EAC5D,IAAI;IACFA,QAAQ,CAACJ,MAAM,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,OAAOY,KAAU,EAAE;IACnBR,QAAQ,CAACL,YAAY,CAACa,KAAK,CAACP,QAAQ,GAAGO,KAAK,CAACP,QAAQ,CAACG,IAAI,CAACK,OAAO,GAAG,eAAe,CAAC,CAAC;EACxF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}