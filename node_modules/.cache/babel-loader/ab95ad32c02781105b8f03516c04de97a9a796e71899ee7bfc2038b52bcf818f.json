{"ast":null,"code":"import apiClient from '../api/apiClient'; // Axios instance\n\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport { jwtDecode } from 'jwt-decode';\nexport const login = credentials => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const response = await apiClient.post('/users/login/', credentials);\n    const {\n      access\n    } = response.data;\n    console.log(' response.data', response.data);\n    const user = jwtDecode(access);\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({\n      token: access,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\nexport const register = data => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const response = await apiClient.post('/users/register/', data);\n    const {\n      token\n    } = response.data;\n    const user = jwtDecode(token);\n    localStorage.setItem('token', token);\n    dispatch(loginSuccess({\n      token,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Registration failed'));\n  }\n};\nexport const logoutUser = () => async dispatch => {\n  try {\n    localStorage.removeItem('token');\n    dispatch(logout());\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Logout failed'));\n  }\n};","map":{"version":3,"names":["apiClient","loginRequest","loginSuccess","loginFailure","logout","jwtDecode","login","credentials","dispatch","response","post","access","data","console","log","user","localStorage","setItem","token","error","message","register","logoutUser","removeItem"],"sources":["/Users/gylou/Documents/projects/calendar-event-app/src/actions/authActions.ts"],"sourcesContent":["import apiClient from '../api/apiClient'; // Axios instance\nimport { AppThunk } from '../store';\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport { jwtDecode } from 'jwt-decode';\n\nexport const login = (credentials: { email: string; password: string }): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n\n    const response = await apiClient.post('/users/login/', credentials);\n    const { access } = response.data;\n    console.log(' response.data', response.data)\n    const user = jwtDecode(access);\n\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({ token:access, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\n\nexport const register = (data: { email: string; password: string; fullName: string; organization: string }): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n\n    const response = await apiClient.post('/users/register/', data);\n    const { token } = response.data;\n    const user = jwtDecode(token);\n\n    localStorage.setItem('token', token);\n    dispatch(loginSuccess({ token, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Registration failed'));\n  }\n};\n\nexport const logoutUser = (): AppThunk => async (dispatch) => {\n  try {\n    localStorage.removeItem('token');\n    dispatch(logout());\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Logout failed'));\n  }\n};\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,kBAAkB,CAAC,CAAC;;AAE1C,SAASC,YAAY,EAAEC,YAAY,EAAEC,YAAY,EAAEC,MAAM,QAAQ,yBAAyB;AAC1F,SAASC,SAAS,QAAQ,YAAY;AAEtC,OAAO,MAAMC,KAAK,GAAIC,WAAgD,IAAe,MAAOC,QAAQ,IAAK;EACvG,IAAI;IACFA,QAAQ,CAACP,YAAY,CAAC,CAAC,CAAC;IAExB,MAAMQ,QAAQ,GAAG,MAAMT,SAAS,CAACU,IAAI,CAAC,eAAe,EAAEH,WAAW,CAAC;IACnE,MAAM;MAAEI;IAAO,CAAC,GAAGF,QAAQ,CAACG,IAAI;IAChCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEL,QAAQ,CAACG,IAAI,CAAC;IAC5C,MAAMG,IAAI,GAAGV,SAAS,CAACM,MAAM,CAAC;IAE9BK,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEN,MAAM,CAAC;IACrCH,QAAQ,CAACN,YAAY,CAAC;MAAEgB,KAAK,EAACP,MAAM;MAAEI;IAAK,CAAC,CAAC,CAAC;EAChD,CAAC,CAAC,OAAOI,KAAU,EAAE;IACnBX,QAAQ,CAACL,YAAY,CAACgB,KAAK,CAACV,QAAQ,GAAGU,KAAK,CAACV,QAAQ,CAACG,IAAI,CAACQ,OAAO,GAAG,cAAc,CAAC,CAAC;EACvF;AACF,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAIT,IAAiF,IAAe,MAAOJ,QAAQ,IAAK;EAC3I,IAAI;IACFA,QAAQ,CAACP,YAAY,CAAC,CAAC,CAAC;IAExB,MAAMQ,QAAQ,GAAG,MAAMT,SAAS,CAACU,IAAI,CAAC,kBAAkB,EAAEE,IAAI,CAAC;IAC/D,MAAM;MAAEM;IAAM,CAAC,GAAGT,QAAQ,CAACG,IAAI;IAC/B,MAAMG,IAAI,GAAGV,SAAS,CAACa,KAAK,CAAC;IAE7BF,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,KAAK,CAAC;IACpCV,QAAQ,CAACN,YAAY,CAAC;MAAEgB,KAAK;MAAEH;IAAK,CAAC,CAAC,CAAC;EACzC,CAAC,CAAC,OAAOI,KAAU,EAAE;IACnBX,QAAQ,CAACL,YAAY,CAACgB,KAAK,CAACV,QAAQ,GAAGU,KAAK,CAACV,QAAQ,CAACG,IAAI,CAACQ,OAAO,GAAG,qBAAqB,CAAC,CAAC;EAC9F;AACF,CAAC;AAED,OAAO,MAAME,UAAU,GAAGA,CAAA,KAAgB,MAAOd,QAAQ,IAAK;EAC5D,IAAI;IACFQ,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;IAChCf,QAAQ,CAACJ,MAAM,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,OAAOe,KAAU,EAAE;IACnBX,QAAQ,CAACL,YAAY,CAACgB,KAAK,CAACV,QAAQ,GAAGU,KAAK,CAACV,QAAQ,CAACG,IAAI,CAACQ,OAAO,GAAG,eAAe,CAAC,CAAC;EACxF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}