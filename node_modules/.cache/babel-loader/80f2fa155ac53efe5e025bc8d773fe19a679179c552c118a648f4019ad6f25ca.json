{"ast":null,"code":"// src/actions/authActions.ts\n\nimport { jwtDecode } from 'jwt-decode';\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport apiClient from '../api/apiClient';\nexport const login = credentials => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const response = await apiClient.post('/login', credentials); // Use apiClient here\n    const {\n      token\n    } = response.data;\n    const user = jwtDecode(token); // Decode the JWT token\n\n    localStorage.setItem('token', token); // Store token in localStorage\n\n    dispatch(loginSuccess({\n      token,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem('token');\n  dispatch(logout());\n};","map":{"version":3,"names":["jwtDecode","loginRequest","loginSuccess","loginFailure","logout","apiClient","login","credentials","dispatch","response","post","token","data","user","localStorage","setItem","error","message","logoutUser","removeItem"],"sources":["/Users/gylou/Documents/projects/calendar-event-app/src/actions/authActions.ts"],"sourcesContent":["// src/actions/authActions.ts\nimport { AppThunk } from '../store';\nimport {jwtDecode} from 'jwt-decode';\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport apiClient from '../api/apiClient';\n\ninterface LoginResponse {\n  token: string;\n}\n\nexport const login = (credentials: { email: string; password: string }): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n\n    const response = await apiClient.post<LoginResponse>('/login', credentials); // Use apiClient here\n    const { token } = response.data;\n\n    const user = jwtDecode(token);  // Decode the JWT token\n\n    localStorage.setItem('token', token);  // Store token in localStorage\n\n    dispatch(loginSuccess({ token, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\n\nexport const logoutUser = (): AppThunk => (dispatch) => {\n  localStorage.removeItem('token');\n  dispatch(logout());\n};\n"],"mappings":"AAAA;;AAEA,SAAQA,SAAS,QAAO,YAAY;AACpC,SAASC,YAAY,EAAEC,YAAY,EAAEC,YAAY,EAAEC,MAAM,QAAQ,yBAAyB;AAC1F,OAAOC,SAAS,MAAM,kBAAkB;AAMxC,OAAO,MAAMC,KAAK,GAAIC,WAAgD,IAAe,MAAOC,QAAQ,IAAK;EACvG,IAAI;IACFA,QAAQ,CAACP,YAAY,CAAC,CAAC,CAAC;IAExB,MAAMQ,QAAQ,GAAG,MAAMJ,SAAS,CAACK,IAAI,CAAgB,QAAQ,EAAEH,WAAW,CAAC,CAAC,CAAC;IAC7E,MAAM;MAAEI;IAAM,CAAC,GAAGF,QAAQ,CAACG,IAAI;IAE/B,MAAMC,IAAI,GAAGb,SAAS,CAACW,KAAK,CAAC,CAAC,CAAE;;IAEhCG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC,CAAC,CAAE;;IAEvCH,QAAQ,CAACN,YAAY,CAAC;MAAES,KAAK;MAAEE;IAAK,CAAC,CAAC,CAAC;EACzC,CAAC,CAAC,OAAOG,KAAU,EAAE;IACnBR,QAAQ,CAACL,YAAY,CAACa,KAAK,CAACP,QAAQ,GAAGO,KAAK,CAACP,QAAQ,CAACG,IAAI,CAACK,OAAO,GAAG,cAAc,CAAC,CAAC;EACvF;AACF,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAiBV,QAAQ,IAAK;EACtDM,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;EAChCX,QAAQ,CAACJ,MAAM,CAAC,CAAC,CAAC;AACpB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}