{"ast":null,"code":"import apiClient from '../api/apiClient'; // Axios instance\n\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport { jwtDecode } from 'jwt-decode';\nimport { registerUser } from '../api/user';\nexport const login = credentials => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const response = await apiClient.post('/users/login/', credentials);\n    const {\n      access\n    } = response.data;\n    console.log(' response.data', response.data);\n    const user = jwtDecode(access);\n    console.log('user', user);\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({\n      token: access,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\nexport const register = data => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const response = await registerUser(data);\n    const {\n      access\n    } = response.data;\n    const user = jwtDecode(access);\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({\n      token: access,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Registration failed'));\n  }\n};\nexport const logoutUser = () => async dispatch => {\n  try {\n    localStorage.removeItem('token');\n    dispatch(logout());\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Logout failed'));\n  }\n};","map":{"version":3,"names":["apiClient","loginRequest","loginSuccess","loginFailure","logout","jwtDecode","registerUser","login","credentials","dispatch","response","post","access","data","console","log","user","localStorage","setItem","token","error","message","register","logoutUser","removeItem"],"sources":["/Users/gylou/Documents/projects/calendar-event-app/src/actions/authActions.ts"],"sourcesContent":["import apiClient from '../api/apiClient'; // Axios instance\nimport { AppThunk } from '../store';\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport { jwtDecode } from 'jwt-decode';\nimport { User } from '../types';\nimport { registerUser } from '../api/user';\n\nexport const login = (credentials: { email: string; password: string }): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n\n    const response = await apiClient.post('/users/login/', credentials);\n    const { access } = response.data;\n    console.log(' response.data', response.data)\n    const user = jwtDecode(access);\n    console.log('user',user)\n\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({ token:access, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\n\nexport const register = (data: User): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n\n    const response = await registerUser(data);\n    const { access } = response.data;\n    const user = jwtDecode(access);\n\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({ token:access, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Registration failed'));\n  }\n};\n\nexport const logoutUser = (): AppThunk => async (dispatch) => {\n  try {\n    localStorage.removeItem('token');\n    dispatch(logout());\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Logout failed'));\n  }\n};\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,kBAAkB,CAAC,CAAC;;AAE1C,SAASC,YAAY,EAAEC,YAAY,EAAEC,YAAY,EAAEC,MAAM,QAAQ,yBAAyB;AAC1F,SAASC,SAAS,QAAQ,YAAY;AAEtC,SAASC,YAAY,QAAQ,aAAa;AAE1C,OAAO,MAAMC,KAAK,GAAIC,WAAgD,IAAe,MAAOC,QAAQ,IAAK;EACvG,IAAI;IACFA,QAAQ,CAACR,YAAY,CAAC,CAAC,CAAC;IAExB,MAAMS,QAAQ,GAAG,MAAMV,SAAS,CAACW,IAAI,CAAC,eAAe,EAAEH,WAAW,CAAC;IACnE,MAAM;MAAEI;IAAO,CAAC,GAAGF,QAAQ,CAACG,IAAI;IAChCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEL,QAAQ,CAACG,IAAI,CAAC;IAC5C,MAAMG,IAAI,GAAGX,SAAS,CAACO,MAAM,CAAC;IAC9BE,OAAO,CAACC,GAAG,CAAC,MAAM,EAACC,IAAI,CAAC;IAExBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEN,MAAM,CAAC;IACrCH,QAAQ,CAACP,YAAY,CAAC;MAAEiB,KAAK,EAACP,MAAM;MAAEI;IAAK,CAAC,CAAC,CAAC;EAChD,CAAC,CAAC,OAAOI,KAAU,EAAE;IACnBX,QAAQ,CAACN,YAAY,CAACiB,KAAK,CAACV,QAAQ,GAAGU,KAAK,CAACV,QAAQ,CAACG,IAAI,CAACQ,OAAO,GAAG,cAAc,CAAC,CAAC;EACvF;AACF,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAIT,IAAU,IAAe,MAAOJ,QAAQ,IAAK;EACpE,IAAI;IACFA,QAAQ,CAACR,YAAY,CAAC,CAAC,CAAC;IAExB,MAAMS,QAAQ,GAAG,MAAMJ,YAAY,CAACO,IAAI,CAAC;IACzC,MAAM;MAAED;IAAO,CAAC,GAAGF,QAAQ,CAACG,IAAI;IAChC,MAAMG,IAAI,GAAGX,SAAS,CAACO,MAAM,CAAC;IAE9BK,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEN,MAAM,CAAC;IACrCH,QAAQ,CAACP,YAAY,CAAC;MAAEiB,KAAK,EAACP,MAAM;MAAEI;IAAK,CAAC,CAAC,CAAC;EAChD,CAAC,CAAC,OAAOI,KAAU,EAAE;IACnBX,QAAQ,CAACN,YAAY,CAACiB,KAAK,CAACV,QAAQ,GAAGU,KAAK,CAACV,QAAQ,CAACG,IAAI,CAACQ,OAAO,GAAG,qBAAqB,CAAC,CAAC;EAC9F;AACF,CAAC;AAED,OAAO,MAAME,UAAU,GAAGA,CAAA,KAAgB,MAAOd,QAAQ,IAAK;EAC5D,IAAI;IACFQ,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;IAChCf,QAAQ,CAACL,MAAM,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,OAAOgB,KAAU,EAAE;IACnBX,QAAQ,CAACN,YAAY,CAACiB,KAAK,CAACV,QAAQ,GAAGU,KAAK,CAACV,QAAQ,CAACG,IAAI,CAACQ,OAAO,GAAG,eAAe,CAAC,CAAC;EACxF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}