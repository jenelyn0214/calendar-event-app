{"ast":null,"code":"// Axios instance\n\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport { jwtDecode } from 'jwt-decode';\nimport { loginUser, registerUser } from '../api/user';\nexport const login = credentials => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const {\n      access\n    } = await loginUser(credentials);\n    const user = jwtDecode(access);\n    console.log('user', user);\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({\n      token: access,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\nexport const register = data => async dispatch => {\n  try {\n    dispatch(loginRequest());\n    const {\n      access\n    } = await registerUser(data);\n    const user = jwtDecode(access);\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({\n      token: access,\n      user\n    }));\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Registration failed'));\n  }\n};\nexport const logoutUser = () => async dispatch => {\n  try {\n    localStorage.removeItem('token');\n    dispatch(logout());\n  } catch (error) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Logout failed'));\n  }\n};","map":{"version":3,"names":["loginRequest","loginSuccess","loginFailure","logout","jwtDecode","loginUser","registerUser","login","credentials","dispatch","access","user","console","log","localStorage","setItem","token","error","response","data","message","register","logoutUser","removeItem"],"sources":["/Users/gylou/Documents/projects/calendar-event-app/src/actions/authActions.ts"],"sourcesContent":["import apiClient from '../api/apiClient'; // Axios instance\nimport { AppThunk } from '../store';\nimport { loginRequest, loginSuccess, loginFailure, logout } from '../reducers/authReducer';\nimport { jwtDecode } from 'jwt-decode';\nimport { User, UserCredentials } from '../types';\nimport { loginUser, registerUser } from '../api/user';\n\nexport const login = (credentials: UserCredentials): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n\n    const { access } = await loginUser(credentials);\n    const user = jwtDecode(access);\n    console.log('user',user)\n\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({ token:access, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Login failed'));\n  }\n};\n\nexport const register = (data: User): AppThunk => async (dispatch) => {\n  try {\n    dispatch(loginRequest());\n    const { access } = await registerUser(data);\n    const user = jwtDecode(access);\n\n    localStorage.setItem('token', access);\n    dispatch(loginSuccess({ token:access, user }));\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Registration failed'));\n  }\n};\n\nexport const logoutUser = (): AppThunk => async (dispatch) => {\n  try {\n    localStorage.removeItem('token');\n    dispatch(logout());\n  } catch (error: any) {\n    dispatch(loginFailure(error.response ? error.response.data.message : 'Logout failed'));\n  }\n};\n"],"mappings":"AAA0C;;AAE1C,SAASA,YAAY,EAAEC,YAAY,EAAEC,YAAY,EAAEC,MAAM,QAAQ,yBAAyB;AAC1F,SAASC,SAAS,QAAQ,YAAY;AAEtC,SAASC,SAAS,EAAEC,YAAY,QAAQ,aAAa;AAErD,OAAO,MAAMC,KAAK,GAAIC,WAA4B,IAAe,MAAOC,QAAQ,IAAK;EACnF,IAAI;IACFA,QAAQ,CAACT,YAAY,CAAC,CAAC,CAAC;IAExB,MAAM;MAAEU;IAAO,CAAC,GAAG,MAAML,SAAS,CAACG,WAAW,CAAC;IAC/C,MAAMG,IAAI,GAAGP,SAAS,CAACM,MAAM,CAAC;IAC9BE,OAAO,CAACC,GAAG,CAAC,MAAM,EAACF,IAAI,CAAC;IAExBG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,MAAM,CAAC;IACrCD,QAAQ,CAACR,YAAY,CAAC;MAAEe,KAAK,EAACN,MAAM;MAAEC;IAAK,CAAC,CAAC,CAAC;EAChD,CAAC,CAAC,OAAOM,KAAU,EAAE;IACnBR,QAAQ,CAACP,YAAY,CAACe,KAAK,CAACC,QAAQ,GAAGD,KAAK,CAACC,QAAQ,CAACC,IAAI,CAACC,OAAO,GAAG,cAAc,CAAC,CAAC;EACvF;AACF,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAIF,IAAU,IAAe,MAAOV,QAAQ,IAAK;EACpE,IAAI;IACFA,QAAQ,CAACT,YAAY,CAAC,CAAC,CAAC;IACxB,MAAM;MAAEU;IAAO,CAAC,GAAG,MAAMJ,YAAY,CAACa,IAAI,CAAC;IAC3C,MAAMR,IAAI,GAAGP,SAAS,CAACM,MAAM,CAAC;IAE9BI,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,MAAM,CAAC;IACrCD,QAAQ,CAACR,YAAY,CAAC;MAAEe,KAAK,EAACN,MAAM;MAAEC;IAAK,CAAC,CAAC,CAAC;EAChD,CAAC,CAAC,OAAOM,KAAU,EAAE;IACnBR,QAAQ,CAACP,YAAY,CAACe,KAAK,CAACC,QAAQ,GAAGD,KAAK,CAACC,QAAQ,CAACC,IAAI,CAACC,OAAO,GAAG,qBAAqB,CAAC,CAAC;EAC9F;AACF,CAAC;AAED,OAAO,MAAME,UAAU,GAAGA,CAAA,KAAgB,MAAOb,QAAQ,IAAK;EAC5D,IAAI;IACFK,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;IAChCd,QAAQ,CAACN,MAAM,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,OAAOc,KAAU,EAAE;IACnBR,QAAQ,CAACP,YAAY,CAACe,KAAK,CAACC,QAAQ,GAAGD,KAAK,CAACC,QAAQ,CAACC,IAAI,CAACC,OAAO,GAAG,eAAe,CAAC,CAAC;EACxF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}